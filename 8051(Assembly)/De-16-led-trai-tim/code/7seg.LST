A51 MACRO ASSEMBLER  7SEG                                                                 05/03/2025 22:44:36 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN 7seg.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE 7seg.asm SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

                       1     ; ƒê·ªãnh nghƒ©a c√°c bi·∫øn v√† h·∫±ng s·ªë
  0090                 2     ROW         EQU P1          ; G√°n t√™n ROW cho Port 1, port n√†y s·∫Ω ƒëi·ªÅu khi·ªÉn c√°c
                              h√†ng c·ªßa ma tr·∫≠n LED
  00A0                 3     COL         EQU P2          ; G√°n t√™n COL cho Port 2, port n√†y s·∫Ω ƒëi·ªÅu khi·ªÉn c√°c
                              c·ªôt c·ªßa ma tr·∫≠n LED
  001E                 4     DELAY_COUNT EQU 30          ; ƒê·ªãnh nghƒ©a h·∫±ng s·ªë DELAY_COUNT v·ªõi gi√° tr·ªã 30, ƒ
                             ë∆∞·ª£c s·ª≠ d·ª•ng trong h√†m delay ƒë·ªÉ t·∫°o ƒë·ªô tr·ªÖ kho·∫£ng 500ms
                       5     
0000                   6     ORG 0000H                   ; Ch·ªâ th·ªã cho tr√¨nh bi√™n d·ªãch ƒë·∫∑t ƒëo·∫°n m√£ sau t·
                             ∫°i ƒë·ªãa ch·ªâ 0000H (ƒëi·ªÉm b·∫Øt ƒë·∫ßu th·ª±c thi c·ªßa vi ƒëi·ªÅu khi·ªÉn)
0000 8000              7         SJMP MAIN               ; L·ªánh nh·∫£y kh√¥ng ƒëi·ªÅu ki·ªán ƒë·∫øn nh√£n MAIN, b·ªè q
                             ua c√°c ph·∫ßn m√£ kh√°c c√≥ th·ªÉ n·∫±m tr∆∞·ªõc
                       8     
                       9     ; Ch∆∞∆°ng tr√¨nh ch√≠nh
0002                  10     MAIN:
                      11     
0002                  12     LOOP:
0002 75A040           13         MOV COL, #01000000B      ; G·ª≠i gi√° tr·ªã nh·ªã ph√¢n 01000000B (ch·ªâ bit 6 l√† 1) r
                             a Port 2 (ƒëi·ªÅu khi·ªÉn c·ªôt), k√≠ch ho·∫°t c·ªôt t∆∞∆°ng ·ª©ng
0005 7590EF           14         MOV ROW, #11101111B      ; G·ª≠i gi√° tr·ªã nh·ªã ph√¢n 11101111B ra Port 1 (ƒëi·ªÅu kh
                             i·ªÉn h√†ng), k√≠ch ho·∫°t h√†ng t∆∞∆°ng ·ª©ng (bit 3 l√† 0)
0008 1184             15         ACALL DELAY_MS          ; G·ªçi ch∆∞∆°ng tr√¨nh con DELAY_MS ƒë·ªÉ t·∫°o m·ªôt kho·∫£ng
                              tr·ªÖ ng·∫Øn, gi√∫p m·∫Øt ng∆∞·ªùi nh√¨n th·∫•y LED s√°ng
                      16     
000A 75A040           17         MOV COL, #01000000B
000D 7590F7           18         MOV ROW, #11110111B
0010 1184             19         ACALL DELAY_MS
                      20     
0012 75A020           21         MOV COL, #00100000B      ; K√≠ch ho·∫°t c·ªôt c√≥ bit 5 l√† 1
0015 7590FB           22         MOV ROW, #11111011B      ; K√≠ch ho·∫°t h√†ng c√≥ bit 2 l√† 0
0018 1184             23         ACALL DELAY_MS
                      24     
001A 75A010           25         MOV COL, #00010000B      ; K√≠ch ho·∫°t c·ªôt c√≥ bit 4 l√† 1
001D 7590FD           26         MOV ROW, #11111101B      ; K√≠ch ho·∫°t h√†ng c√≥ bit 1 l√† 0
0020 1184             27         ACALL DELAY_MS
                      28     
0022 75A008           29         MOV COL, #00001000B      ; K√≠ch ho·∫°t c·ªôt c√≥ bit 3 l√† 1
0025 7590FE           30         MOV ROW, #11111110B      ; K√≠ch ho·∫°t h√†ng c√≥ bit 0 l√† 0
0028 1184             31         ACALL DELAY_MS
                      32     
002A 75A004           33         MOV COL, #00000100B      ; K√≠ch ho·∫°t c·ªôt c√≥ bit 2 l√† 1
002D 7590FE           34         MOV ROW, #11111110B
0030 1184             35         ACALL DELAY_MS
                      36     
0032 75A002           37         MOV COL, #00000010B      ; K√≠ch ho·∫°t c·ªôt c√≥ bit 1 l√† 1
0035 7590FD           38         MOV ROW, #11111101B
0038 1184             39         ACALL DELAY_MS
                      40     
003A 75A002           41         MOV COL, #00000010B
003D 7590FB           42         MOV ROW, #11111011B
0040 1184             43         ACALL DELAY_MS
                      44     
0042 75A004           45         MOV COL, #00000100B
0045 7590F7           46         MOV ROW, #11110111B
0048 1184             47         ACALL DELAY_MS
                      48     
004A 75A004           49         MOV COL, #00000100B
004D 7590EF           50         MOV ROW, #11101111B
A51 MACRO ASSEMBLER  7SEG                                                                 05/03/2025 22:44:36 PAGE     2

0050 1184             51         ACALL DELAY_MS
                      52     
0052 75A002           53         MOV COL, #00000010B
0055 7590DF           54         MOV ROW, #11011111B
0058 1184             55         ACALL DELAY_MS
                      56     
005A 75A002           57         MOV COL, #00000010B
005D 7590BF           58         MOV ROW, #10111111B
0060 1184             59         ACALL DELAY_MS
                      60     
0062 75A004           61         MOV COL, #00000100B
0065 75907F           62         MOV ROW, #01111111B
0068 1184             63         ACALL DELAY_MS
                      64     
006A 75A008           65         MOV COL, #00001000B
006D 75907F           66         MOV ROW, #01111111B
0070 1184             67         ACALL DELAY_MS
                      68     
0072 75A010           69         MOV COL, #00010000B
0075 7590BF           70         MOV ROW, #10111111B
0078 1184             71         ACALL DELAY_MS
                      72     
007A 75A020           73         MOV COL, #00100000B
007D 7590DF           74         MOV ROW, #11011111B
0080 1184             75         ACALL DELAY_MS
                      76     
0082 1102             77         ACALL LOOP              ; Nh·∫£y kh√¥ng ƒëi·ªÅu ki·ªán v·ªÅ ƒë·∫ßu nh√£n LOOP, t·∫°o th
                             √†nh m·ªôt v√≤ng l·∫∑p v√¥ h·∫°n
                      78     
                      79     ; H√†m delay ~500ms
0084                  80     DELAY_MS:
0084 7A1E             81         MOV R2, #DELAY_COUNT    ; G√°n gi√° tr·ªã c·ªßa h·∫±ng s·ªë DELAY_COUNT (30) v√†o thanh
                              ghi R2, R2 s·∫Ω ƒë∆∞·ª£c d√πng l√†m b·ªô ƒë·∫øm v√≤ng l·∫∑p ngo√†i
0086                  82     DELAY_LOOP:
0086 7B0A             83         MOV R3, #10             ; G√°n gi√° tr·ªã 10 v√†o thanh ghi R3, R3 s·∫Ω ƒë∆∞·ª£c d√πng 
                             l√†m b·ªô ƒë·∫øm v√≤ng l·∫∑p trung gian (~1ms)
0088                  84     DELAY_INNER:
0088 7C0A             85         MOV R4, #10             ; G√°n gi√° tr·ªã 10 v√†o thanh ghi R4, R4 s·∫Ω ƒë∆∞·ª£c d√πng 
                             l√†m b·ªô ƒë·∫øm v√≤ng l·∫∑p trong (~0.1ms)
008A DCFE             86         DJNZ R4, $              ; Gi·∫£m gi√° tr·ªã c·ªßa R4 ƒëi 1 v√† nh·∫£y v·ªÅ ƒë·ªãa ch·ªâ
                              hi·ªán t·∫°i ($) n·∫øu R4 kh√°c 0 (t·∫°o delay nh·ªè)
008C DBFA             87         DJNZ R3, DELAY_INNER    ; Gi·∫£m gi√° tr·ªã c·ªßa R3 ƒëi 1 v√† nh·∫£y v·ªÅ nh√£n DELAY_
                             INNER n·∫øu R3 kh√°c 0 (l·∫∑p l·∫°i v√≤ng l·∫∑p trong)
008E DAF6             88         DJNZ R2, DELAY_LOOP     ; Gi·∫£m gi√° tr·ªã c·ªßa R2 ƒëi 1 v√† nh·∫£y v·ªÅ nh√£n DELAY_
                             LOOP n·∫øu R2 kh√°c 0 (l·∫∑p l·∫°i v√≤ng l·∫∑p trung gian)
0090 22               89         RET                     ; L·ªánh tr·∫£ v·ªÅ ch∆∞∆°ng tr√¨nh g·ªçi (trong tr∆∞·ªùng h·ª£
                             p n√†y l√† MAIN)
                      90     
                      91     END                         ; Ch·ªâ th·ªã k·∫øt th√∫c ch∆∞∆°ng tr√¨nh Assembly
A51 MACRO ASSEMBLER  7SEG                                                                 05/03/2025 22:44:36 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

COL. . . . . . . .  D ADDR   00A0H   A   
DELAY_COUNT. . . .  N NUMB   001EH   A   
DELAY_INNER. . . .  C ADDR   0088H   A   
DELAY_LOOP . . . .  C ADDR   0086H   A   
DELAY_MS . . . . .  C ADDR   0084H   A   
LOOP . . . . . . .  C ADDR   0002H   A   
MAIN . . . . . . .  C ADDR   0002H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
ROW. . . . . . . .  D ADDR   0090H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
